<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>MathJax / MathSpeak / Speak.js Integration Demo by gcapiel</title>
    	<script type="text/javascript" src="unpackedlanguagebuffer/MathJax.js?config=MML_HTMLorMML,lang_enus"></script>
	<script src="speakClient.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      function display() {
        var str = document.getElementById("equation_editor").value;
        var svg_node = document.getElementById("svg_node");
        svg_node.innerHTML = '`' + str + '`';
        MathJax.Hub.Typeset(svg_node);
      }
      <!-- https://groups.google.com/d/topic/mathjax-users/unL8IjcrTto/discussion -->
      function toMathML(jax, callback) {
        var mml;
        try {
          mml = jax.root.toMathML("");
        } catch(err) {
          if (!err.restart) { throw err; }
          return MathJax.Callback.After([toMathML, jax, callback], err, restart);
        }
        MathJax.Callback(callback)(mml);
      }
      function clearDescription() {
        var description_node = document.getElementById("description");
        description_node.value = '';
      }
      function appendToDescription() {
        var svg_node = document.getElementById("svg_node");
        MathJax.Hub.Queue(function() {
          var jaxen = MathJax.Hub.getAllJax(svg_node);
          toMathML(jaxen[0], function(mml) {
            var str = document.getElementById("equation_editor").value;
            var description_node = document.getElementById("description");
            $.ajax({
              url: "service?equation=" + str,
              success: function(mde_description) {
                description_node.value += mde_description;
                description_node.value += "\n";
                description_node.value += mml;
              },
              error: function() {
                description_node.value += mml;
              }
              });
          })});
      }
      function copyMML() {
		document.getElementById("mathmlinput").innerHTML = document.getElementById("description").value;
		document.getElementById("mathspeak").innerHTML = '';
        MathJax.Hub.Typeset(document.getElementById("mathmlinput"));
	 }
      </script>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>MathJax / MathSpeak / Speak.js Integration Demo</h1>
          <h2>Voicing Math for the Blind and Visually Impaired</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/gcapiel/mathjax/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/gcapiel/mathjax/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/gcapiel/mathjax" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
<div id="audio"></div>
<b>MathML Code:</b><br>
<textarea id="description" rows="10" cols="80"></textarea>
<button onclick=copyMML();>Update Math</button>
<br><br>
<table border="1"><tr><td valign="center">
<div id="mathmlinput">
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mstyle displaystyle="true">
    <mrow>
      <mi>f</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>&#x2248;</mo>
    <msup>
      <mi>x</mi>
      <mn>3</mn>
    </msup>
    <mo>+</mo>
			<mfrac>
				<mn>8</mn>
				<mn>10</mn>
			</mfrac>
  </mstyle>
</math>
</div>
</td><td valign="top">
	<div id="mathspeak"></div>
</td></tr></table>
        </section>

        <footer>
          MathJax / MathSpeak / Speak.js Integration Demo is maintained by <a href="https://github.com/gcapiel">gcapiel</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>